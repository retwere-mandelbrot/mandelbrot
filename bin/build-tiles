#!/bin/sh
#   build-tiles -- makes tiles for use with leaflet.

# zoom 0
mkdir -p ./public/tiles/0/0
../mandelbrot/target/release/mandelbrot -o ./public/tiles/0/0/0.png --x-res 2048 --y-res 2048 --x-min -4.0 --x-max 4.0 --y-min -4.0 --y-max 4.0

# zoom 1
mkdir -p ./public/tiles/1/0
../mandelbrot/target/release/mandelbrot -o ./public/tiles/1/0/0.png --x-res 2048 --y-res 2048 --x-min -4.0 --x-max 0.0 --y-min -4.0 --y-max 0.0
../mandelbrot/target/release/mandelbrot -o ./public/tiles/1/0/1.png --x-res 2048 --y-res 2048 --x-min -4.0 --x-max 0.0 --y-min 0.0 --y-max 4.0

mkdir -p ./public/tiles/1/1
../mandelbrot/target/release/mandelbrot -o ./public/tiles/1/1/0.png --x-res 2048 --y-res 2048 --x-min 0.0 --x-max 4.0 --y-min -4.0 --y-max 0.0
../mandelbrot/target/release/mandelbrot -o ./public/tiles/1/1/1.png --x-res 2048 --y-res 2048 --x-min 0.0 --x-max 4.0 --y-min 0.0 --y-max 4.0





# while [ $level -lt 10 ]
# do
#   echo $tile $tiles
#   tiles=$(($tiles*2))
#   level=$(($level+1))
#   step=$(printf "%0.10f" $(echo "$step*0.5" | bc))
#   tile=$(printf "%0f" $(echo "-0.8*$tiles" | bc))

# #  while [ $t -lt $tiles ]

# done

# for i in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
# do
#   px=$(echo "$i*$res" | bc)
#   x0=$(printf "%0.10f" $(echo "$x_min + $i * $step" | bc))
#   x1=$(printf "%0.10f" $(echo "$x_min + ($i+1) * $step" | bc))
#   for j in 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
#   do
#     py=$(echo "$j*$res" | bc)
#     y0=$(printf "%0.10f" $(echo "$y_min + $j * $step" | bc))
#     y1=$(printf "%0.10f" $(echo "$y_min + ($j+1) * $step" | bc))
#     dir=./public/tiles/0/$i
#     img=$dir/$j.png

#     echo building tile $img
#     mkdir -p $dir
#     ../mandelbrot/target/release/mandelbrot -o $img --x-res $res --y-res $res --x-min $x0 --x-max $x1 --y-min $y0 --y-max $y1
#   done
# done
